# 氏名漢字カナ突合モデル


本プログラムの詳細や使い方については，[氏名突合支援サービスサポートサイト](https://kktg.digital.go.jp/support/index.html)を参照のこと。


## 説明

氏名漢字カナ突合モデルは，氏名の漢字もしくはアルファベット姓名とその読みであるカタカナを突合するモデルである。
モデルの機能は，次の３つの機能を有する
- 氏名漢字カナ突合機能    
漢字・アルファベット姓名とカタカナ姓名を入力し，それらが一致しているかどうかを判定する。判定結果は0から100の数値で返却し，数値が高いほど一致度合いが高いことを示す。

- 氏名カタカナ推計機能   
漢字・アルファベット姓名を入力し，その漢字姓名から推測される読みのカタカナを出力する機能。入力された漢字・アルファベット姓名の読みのカタカナであると推測される確率の高い順に出力する。
- 氏名漢字推計機能  
カタカナ姓名を入力し，そのカタカナ姓名から推測される漢字・アルファベット姓名を出力する機能。入力されたカタカナ姓名のもとである，漢字・アルファベット姓名であると推測される確率の高い順に出力する。


## 使用データ
本モデルでは，漢字・アルファベットとその読みであるカタカナのペアをデータとして使用している。
使用したデータの一覧は次のとおり

### 辞書データ
- [canna](https://osdn.dl.osdn.net/canna/)
- [freewnn](https://osdn.dl.osdn.net/freewnn/)
- [ipadic](https://taku910.github.io/mecab/)
- [kakasi](http://kakasi.namazu.org/)
- [mozc](https://github.com/google/mozc/)
- [neologd](https://github.com/neologd/mecab-ipadic-neologd/)
- [skk](https://github.com/skk-dev/dict/)

### Webデータ
- [wikipedia](https://dumps.wikimedia.org/)


## モデル

それぞれの機能のアルゴリズムの詳細については[モデル](https://kktg.digital.go.jp/support/model/index.html)を参照のこと。

### 辞書モデル
漢字・アルファベットとその読みであるカタカナの辞書と突合することで，入力した漢字・アルファベット姓名とカタカナ姓名が一致しているかどうかを判断する。
辞書モデルで使用してるデータは，上記「使用データ」のサイトからダウンロードし，スクリプトを利用し作成することができる。


詳細については，[dict](./dict/README.md)を参照のこと。


なお，本モデルで作成した辞書モデルで利用する辞書ファイルについては，[氏名突合支援サービスサポートサイト](https://kktg.digital.go.jp/support/resources/index.html)で配布している。

### 外国人モデル
アルファベット姓名とカタカナ姓名を入力とし， 日本語(ローマ字表記) - 英語表記 部分対応表をもとに，突合を行う。詳細は[佐藤 理史. 2020 東京オリンピック参加者名簿の翻訳. 自然言語処理, Vol.30, No.2, pp748-772, 2023.](https://www.jstage.jst.go.jp/article/jnlp/30/2/30_748/_article/-char/ja)を参照のこと。

### AIモデル
上記の「使用データ」から抽出した，漢字・アルファベットとカタカナのペアを用いてデータセットを作成し，Transformerで学習するモデルである。学習の際には，漢字・アルファベット及び，カタカナを一文字単位でそれぞれ分割し，Transformerに入力，出力として与えることで学習を行った。学習に使用したスクリプトの詳細については，[train](./train/README.md)を参照のこと。

モデルは，下記２つのものを作成した。
- 漢字・アルファベットからカタカナを推論するモデル    
  氏名漢字カナ突合機能と，氏名カタカナ推計機能で利用している。
  学習方法の詳細については，[training.ipynb](train/training.ipynb)を参照のこと。
  学習済みモデルを用いてのファインチューニングの方法の詳細については，[finetuning.ipynb](train/finetuning.ipynb)を参照のこと。

- カタカナから漢字・アルファベットを推論するモデル     
  氏名漢字推計機能で利用している。
  学習方法の詳細については，[training_r.ipynb](train/training_r.ipynb)を参照のこと。


なお，それぞれの事前に学習済みのモデルについては，[氏名突合支援サービスサポートサイト](https://kktg.digital.go.jp/support/resources/index.html)で配布している。


## 実行方法
本モデルについては，コマンドラインから実行するプログラムとして提供している。また，[氏名突合支援API](https://api.kktg.digital.go.jp/)の内部でも利用している。

プログラムについては，[core](./core/README.md)を参照のこと。


## サンプルプログラム

AIモデルをPythonのPytorchで作成し，Python及びJavaで推計するサンプルを提供している。

詳細は[sample](./sample/README.md)を参照のこと。

## 参考文献
本モデルに内包される，外国人モデル（外国人のアルファベット姓名とカタカナ姓名の突合モデル）は，名古屋大学佐藤理史先生作成のrubyプログラムをJavaに移植したものである。
- 佐藤 理史. 2020 東京オリンピック参加者名簿の翻訳. 自然言語処理, Vol.30, No.2, pp748-772, 2023.
[論文](https://www.jstage.jst.go.jp/article/jnlp/30/2/30_748/_article/-char/ja)


